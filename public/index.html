<!-<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RUEDA ‚Äì La pasta venezuelana che gira l‚ÄôItalia</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #fff8ec;
      color: #3b2f2f;
    }
    header {
      background-color: #f2c94c;
      text-align: center;
      padding: 2rem 1rem;
      position: relative;
    }
    header img.logo {
      width: 400px;
      height: auto;
    }
    nav {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin: 1rem 0;
      flex-wrap: wrap;
    }
    nav a {
      padding: 0.5rem 1rem;
      background-color: #3b2f2f;
      color: #fff;
      text-decoration: none;
      border-radius: 8px;
    }
    section {
      padding: 2rem;
      max-width: 800px;
      margin: auto;
    }
    .highlight {
      background-color: #fff1cc;
      padding: 1rem;
      border-radius: 10px;
      margin-bottom: 2rem;
    }
    form input, form textarea, form button, form select {
      width: 100%;
      margin-top: 0.5rem;
      margin-bottom: 1rem;
      padding: 0.5rem;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    footer {
      text-align: center;
      padding: 1rem;
      background-color: #3b2f2f;
      color: #fff;
    }
    .btn {
      display: inline-block;
      margin-top: 1rem;
      padding: 0.7rem 1.2rem;
      background-color: #27ae60;
      color: #fff;
      border: none;
      border-radius: 5px;
      text-decoration: none;
      cursor: pointer;
    }
    .pastelito-img {
      width: 40%;
      max-width: 400px;
      display: block;
      margin: 2rem auto;
      border-radius: 10px;
    }
    .lang-toggle {
      position: absolute;
      top: 10px;
      right: 10px;
      text-align: right;
    }
    .lang-toggle button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      color: #3b2f2f;
      margin: 0 0.5rem;
    }
    .lang-toggle img {
      width: 20px;
      vertical-align: middle;
      margin-right: 5px;
    }
    .testimonial {
      background-color: #fff1cc;
      padding: 1rem;
      margin-bottom: 1rem;
      border-left: 5px solid #f2994a;
    }
  </style>
  <script>
    let hasOrdered = false;

    function switchLanguage(lang) {
      const it = document.querySelectorAll('.lang-it');
      const es = document.querySelectorAll('.lang-es');
      it.forEach(el => el.style.display = lang === 'it' ? 'block' : 'none');
      es.forEach(el => el.style.display = lang === 'es' ? 'block' : 'none');
    }

    function disableTestimonialForm() {
      document.querySelectorAll("#testimonianze form").forEach(form => {
        form.querySelector("textarea").disabled = true;
        form.querySelector("input").disabled = true;
        form.querySelector("button").disabled = true;
      });
    }

    function enableTestimonialForm() {
      document.querySelectorAll("#testimonianze form").forEach(form => {
        form.querySelector("textarea").disabled = false;
        form.querySelector("input").disabled = false;
        form.querySelector("button").disabled = false;
      });
    }

    function sendWhatsAppOrder(event) {
      event.preventDefault();

      const name = document.getElementById('orderName').value;
      const email = document.getElementById('orderEmail').value;
      const qty = document.getElementById('orderQty').value;

      const message = `Ciao! Vorrei ordinare una confezione RUEDA.%0Aüì¶ Quantit√†: ${qty} dischi%0Aüë§ Nome: ${name}%0Aüìß Email: ${email}`;
      const phone = "393932760000";
      const url = `https://wa.me/${phone}?text=${message}`;

      hasOrdered = true;
      alert("Grazie per l'ordine! Ora puoi lasciare una recensione.");
      enableTestimonialForm();
      window.open(url, '_blank');
    }

    document.addEventListener('DOMContentLoaded', () => {
      switchLanguage('it');
      disableTestimonialForm();
    });
  </script>
</head>

<body>
  <header>
    <div class="lang-toggle">
      <button onclick="switchLanguage('it')">
        <img src="img/flag-it.png" alt="IT"> Italiano
      </button>
      <button onclick="switchLanguage('es')">
        <img src="img/flag-es.png" alt="ES"> Espa√±ol
      </button>
    </div>
    <img src="img/logo-rueda.png" alt="RUEDA Logo" class="logo" />
    <p class="lang-it">La sfoglia venezuelana che gira l‚ÄôItalia</p>
    <p class="lang-es" style="display: none;">La masa venezolana que rueda por Italia</p>
    <nav>
      <a href="#chisiamo" class="lang-it">Chi siamo</a>
      <a href="#chisiamo" class="lang-es" style="display: none;">Qui√©nes somos</a>
      <a href="#video" class="lang-it">Come si fanno</a>
      <a href="#video" class="lang-es" style="display: none;">C√≥mo se hacen</a>
      <a href="#listino" class="lang-it">Listino</a>
      <a href="#listino" class="lang-es" style="display: none;">Precios</a>
      <a href="#ordina" class="lang-it">Ordina</a>
      <a href="#ordina" class="lang-es" style="display: none;">Pide</a>
      <a href="#testimonianze" class="lang-it">Testimonianze</a>
      <a href="#testimonianze" class="lang-es" style="display: none;">Testimonios</a>
    </nav>
  </header>

  <section id="chisiamo">
    <h2 class="lang-it">Chi siamo</h2>
    <h2 class="lang-es" style="display: none;">Qui√©nes somos</h2>
    <p class="lang-it">
      RUEDA nasce con un sogno: portare un pezzetto di Venezuela sulle tavole italiane...
Produciamo artigianalmente dischi di pasta per pastelitos, secondo la tradizione venezuelana. Ogni sfoglia √® pensata per essere facile da usare, pronta da farcire, fritta o infornata‚Ä¶ e naturalmente divorata con gusto.
Con ingredienti semplici, senza conservanti, e un cuore latino che batte forte ‚Äî RUEDA √® il ponte tra due culture, da condividere con chi ami.
    </p>
    <p class="lang-es" style="display: none;">
      RUEDA nace con un sue√±o: llevar un pedacito de Venezuela a las mesas italianas...
Producimos artesanalmente discos de masa para pastelitos, siguiendo la tradici√≥n venezolana. Cada l√°mina est√° pensada para ser f√°cil de usar, lista para rellenar, fre√≠r o hornear‚Ä¶ y, por supuesto, devorar con gusto.
Con ingredientes sencillos, sin conservantes, y un coraz√≥n latino que late con fuerza ‚Äî RUEDA es el puente entre dos culturas, para compartir con quienes amas.
    </p>
    <img src="img/pastelito.jpg" alt="Pastelito dorato" class="pastelito-img">
  </section>

  <section id="video">
    <h2 class="lang-it">Come si fanno</h2>
    <h2 class="lang-es" style="display: none;">C√≥mo se hacen</h2>
    <p class="lang-it">Presto potrai imparare passo dopo passo come preparare i pastelitos perfetti, direttamente dalla tradizione venezuelana. Con RUEDA √® semplice, veloce e soddisfacente!</p>
    <p class="lang-es" style="display: none;">¬°Muy pronto podr√°s aprender paso a paso c√≥mo preparar los pastelitos perfectos, directamente desde la tradici√≥n venezolana. ¬°Con RUEDA es f√°cil, r√°pido y satisfactorio!</p>
  </section>

<section id="listino">
  <h2 class="lang-it">Listino prezzi</h2>
  <h2 class="lang-es" style="display: none;">Lista de precios</h2>
  <p class="lang-it">Consulta qui i prezzi delle confezioni RUEDA disponibili.</p>
  <p class="lang-es" style="display: none;">Consulta aqu√≠ los precios de los paquetes RUEDA disponibles.</p>
  <img src="img/listino.png" alt="Listino prezzi RUEDA" style="width: 100%; max-width: 250px; display: block; margin: auto; border-radius: 10px;" />
</section>

  <section id="ordina">
  <h2 class="lang-it">Ordina i tuoi dischi RUEDA</h2>
  <p class="lang-it">Vuoi iniziare subito a cucinare? Ordina direttamente le tue sfoglie artigianali RUEDA!</p>
  <h2 class="lang-es" style="display: none;">Ordena tus discos RUEDA</h2>
  <p class="lang-es" style="display: none;">¬øQuieres empezar a cocinar ya? ¬°Haz tu pedido de las l√°minas artesanales RUEDA directamente!</p>
  <form id="whatsappOrderForm" onsubmit="sendWhatsAppOrder(event)">
    <label for="orderName" class="lang-it">Nome</label>
    <label for="orderName" class="lang-es" style="display:none;">Nombre</label>
    <input type="text" id="orderName" required />

    <label for="orderEmail" class="lang-it">Email</label>
    <label for="orderEmail" class="lang-es" style="display:none;">Correo</label>
    <input type="email" id="orderEmail" required />

    <label for="orderQty" class="lang-it">Quantit√†</label>
    <label for="orderQty" class="lang-es" style="display:none;">Cantidad</label>
    <input type="number" id="orderQty" min="1" value="1" required />

    <button type="submit" class="btn lang-it">Invia ordine via WhatsApp</button>
    <button type="submit" class="btn lang-es" style="display:none;">Enviar pedido por WhatsApp</button>
  </form>
</section>

<section id="testimonianze">
  <h2 class="lang-it">Testimonianze</h2>
  <h2 class="lang-es" style="display:none;">Testimonios</h2>
  
  <div id="testimonialList">
    <!-- Testimonianze caricate qui via JS -->
  </div>

  <h3 class="lang-it">Lascia la tua recensione</h3>
  <h3 class="lang-es" style="display:none;">Deja tu rese√±a</h3>
  
  <form id="testimonialForm" onsubmit="submitTestimonial(event)">
    <label for="nome" class="lang-it">Nome</label>
    <label for="nome" class="lang-es" style="display:none;">Nombre</label>
    <input type="text" id="nome" name="nome" required />
    
    <label for="recensione" class="lang-it">Recensione</label>
    <label for="recensione" class="lang-es" style="display:none;">Rese√±a</label>
    <textarea id="recensione" name="recensione" rows="4" required></textarea>

    <label for="translation" class="lang-it">Traduzione (opzionale)</label>
    <label for="translation" class="lang-es" style="display:none;">Traducci√≥n (opcional)</label>
    <textarea id="translation" name="translation" rows="2"></textarea>
    
    <button type="submit" class="btn lang-it">Invia testimonianza</button>
    <button type="submit" class="btn lang-es" style="display:none;">Enviar testimonio</button>
  </form>
</section>

<footer>
  <p class="lang-it">¬© 2025 RUEDA ‚Äì La pasta venezuelana che gira l‚ÄôItalia</p>
  <p class="lang-es" style="display:none;">¬© 2025 RUEDA ‚Äì La masa venezolana que rueda por Italia</p>
</footer>

<script>
  // Cambia lingua mostrando e nascondendo gli elementi con classe lang-it o lang-es
  function switchLanguage(lang) {
    const itaElems = document.querySelectorAll('.lang-it');
    const espElems = document.querySelectorAll('.lang-es');
    if (lang === 'it') {
      itaElems.forEach(el => el.style.display = '');
      espElems.forEach(el => el.style.display = 'none');
    } else {
      itaElems.forEach(el => el.style.display = 'none');
      espElems.forEach(el => el.style.display = '');
    }
  }

  // Funzione per inviare l'ordine via WhatsApp
  function sendWhatsAppOrder(event) {
    event.preventDefault();
    const nome = document.getElementById('orderName').value.trim();
    const email = document.getElementById('orderEmail').value.trim();
    const qty = document.getElementById('orderQty').value;

    if (!nome || !email || qty < 1) {
      alert('Per favore compila tutti i campi correttamente.');
      return;
    }

    const message = `Ciao, sono ${nome} e vorrei ordinare ${qty} confezioni di RUEDA. La mia email √® ${email}.`;
    const encodedMessage = encodeURIComponent(message);
    // Numero WhatsApp da modificare con il tuo reale
    const whatsappNumber = '393491234567';
    const url = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;
    window.open(url, '_blank');
  }

  // Carica testimonianze dal server
  async function loadTestimonials() {
    try {
      const res = await fetch('/api/testimonianze');
      if (!res.ok) throw new Error('Errore nel caricamento delle testimonianze');
      const testimonials = await res.json();
      const container = document.getElementById('testimonialList');
      container.innerHTML = '';
      if (testimonials.length === 0) {
        container.innerHTML = '<p class="lang-it">Nessuna testimonianza disponibile.</p><p class="lang-es" style="display:none;">No hay testimonios disponibles.</p>';
        return;
      }
      testimonials.forEach(t => {
        const div = document.createElement('div');
        div.className = 'testimonial';
        div.innerHTML = `
          <strong>${t.nome}</strong><br/>
          <em>${t.messaggio}</em>
          ${t.translation ? `<p style="font-style: italic; color: #555;">${t.translation}</p>` : ''}
          <small>${new Date(t.created_at).toLocaleDateString()}</small>
        `;
        container.appendChild(div);
      });
    } catch (error) {
      console.error(error);
    }
  }

  // Invia nuova testimonianza al server
  async function submitTestimonial(event) {
    event.preventDefault();
    const nome = document.getElementById('nome').value.trim();
    const recensione = document.getElementById('recensione').value.trim();
    const translation = document.getElementById('translation').value.trim();

    if (!nome || !recensione) {
      alert('Nome e recensione sono obbligatori!');
      return;
    }

    try {
      const res = await fetch('/api/testimonianze', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({nome, recensione, translation})
      });
      if (!res.ok) throw new Error('Errore nell\'invio della testimonianza');
      alert('Grazie per la tua testimonianza!');
      document.getElementById('testimonialForm').reset();
      loadTestimonials();
    } catch (error) {
      alert('Errore durante l\'invio. Riprova pi√π tardi.');
      console.error(error);
    }
  }

  // Carica testimonianze all'avvio
  window.onload = () => {
    loadTestimonials();
    switchLanguage('it'); // lingua default
  };
</script>
</body>
</html>
